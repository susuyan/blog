(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{480:function(e,n,s){"use strict";s.r(n);var a=s(12),t=Object(a.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"关联类型的一些应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关联类型的一些应用"}},[e._v("#")]),e._v(" 关联类型的一些应用")]),e._v(" "),s("h2",{attrs:{id:"了解关联类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#了解关联类型"}},[e._v("#")]),e._v(" "),s("a",{attrs:{href:"http://swift.gg/2016/08/01/swift-associated-types/",target:"_blank",rel:"noopener noreferrer"}},[e._v("了解关联类型"),s("OutboundLink")],1)]),e._v(" "),s("h2",{attrs:{id:"在-swift-中对使用-storyboard-和-segue-的-view-controller-进行依赖注入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-swift-中对使用-storyboard-和-segue-的-view-controller-进行依赖注入"}},[e._v("#")]),e._v(" 在 Swift 中对使用 Storyboard 和 Segue 的 View Controller 进行依赖注入")]),e._v(" "),s("p",[e._v("在视频中提到的关于使用 SegueHandlerType 的好处有：")]),e._v(" "),s("ul",[s("li",[e._v("如果使用了未定义的 segue 标识，就会有编译期错误")]),e._v(" "),s("li",[e._v("更好地支持重用")]),e._v(" "),s("li",[e._v("方便的语法")])]),e._v(" "),s("p",[e._v("我们同时还见识到了协议的强大：")]),e._v(" "),s("ul",[s("li",[e._v("使用协议以及关联类型来让整个 app 的约束更紧密")]),e._v(" "),s("li",[e._v("使用特定的协议扩展来共享方法的实现")]),e._v(" "),s("li",[e._v("这里面最大的好处就是利用了编译器的优势。你如果使用了这种方法来构建你的代码，编译器将会与你同在，当你犯错时，它就会提醒你。")])]),e._v(" "),s("p",[s("a",{attrs:{href:"http://swift.gg/2016/04/13/swift-making-the-associated-type-parameter-readable-in-protocols/",target:"_blank",rel:"noopener noreferrer"}},[e._v("关联类型参数"),s("OutboundLink")],1)]),e._v(" "),s("h2",{attrs:{id:"seguehandlertype-swift"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#seguehandlertype-swift"}},[e._v("#")]),e._v(" SegueHandlerType.Swift")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('protocol SegueHandlerType {\n    associatedtype SegueIdentifier: RawRepresentable\n}\n\nprotocol Injectable {\n    associatedtype T\n    func inject(_ : T)\n    func assertDependencies()\n}\n\nextension SegueHandlerType where Self: UIViewController,\n    SegueIdentifier.RawValue == String\n{\n\n    func performSegueWithIdentifier(_ segueIdentifier: SegueIdentifier,\n        sender: AnyObject?) {\n\n        performSegue(withIdentifier: segueIdentifier.rawValue, sender: sender)\n    }\n\n    func segueIdentifierForSegue(_ segue: UIStoryboardSegue) -> SegueIdentifier {\n\n        guard let identifier = segue.identifier,\n            let segueIdentifier = SegueIdentifier(rawValue: identifier) else { fatalError("Invalid segue identifier \\(String(describing: segue.identifier)).") }\n\n        return segueIdentifier\n    }\n}\n\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br")])]),s("h2",{attrs:{id:"viewcontroller-swift"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#viewcontroller-swift"}},[e._v("#")]),e._v(" ViewController.swift")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('class ViewController: UIViewController, SegueHandlerType {\n\n    enum SegueIdentifier: String {\n        case TheRedPillExperience\n        case TheBluePillExperience\n    }\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n    }\n\n    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {\n\n        switch segueIdentifierForSegue(segue) {\n\n        case .TheRedPillExperience:\n            let redPillVC = segue.destination as? RedPillViewController\n            redPillVC?.inject("😈")\n        case .TheBluePillExperience:\n            let bluePillVC = segue.destination as? BluePillViewController\n            bluePillVC?.inject("👼")\n        }\n    }\n\n    @IBAction func onRedPillButtonTap(_ sender: AnyObject) {\n        performSegueWithIdentifier(.TheRedPillExperience, sender: self)\n    }\n\n    @IBAction func onBluePillButtonTap(_ sender: AnyObject) {\n        performSegueWithIdentifier(.TheBluePillExperience, sender: self)\n    }\n}\n\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br")])]),s("h2",{attrs:{id:"redpillviewcontroller-swift"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#redpillviewcontroller-swift"}},[e._v("#")]),e._v(" RedPillViewController.swift")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("class RedPillViewController: UIViewController, Injectable {\n\n    @IBOutlet weak fileprivate var mainLabel: UILabel!\n\n    fileprivate var mainText: String!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        // this will crash if the IOU is not set\n        assertDependencies()\n\n\n        mainLabel.text = mainText\n    }\n\n    // Injectable\n    func inject(_ thing: String) {\n        mainText = thing\n    }\n\n    func assertDependencies() {\n        assert(mainText != nil)\n    }\n}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);